@using SilkDesign.Models;
@model ArrangementInventory
@{

    ViewData["Title"] = "Create Arrangement Inventory";
}
<h1>Create Arrangement Inventory</h1>
<h2 class="alert-danger">@ViewBag.Result</h2>

<form method="post">
    <div class="form-group">
        <label asp-for="Code"></label>
        <input class="form-control" asp-for="@Model.Code" readonly />
        
    </div>
    <div class="form-group">
        <br />
        <label asp-for="LocationID">Location</label>
        <select id="LocationID" name="Locationlist" asp-for="LocationID" asp-items='@(new SelectList(ViewBag.NewLocation, "LocationID","Name"))'></select>
        <label asp-for="LocationID"> Placement</label>
        <select id="LocationArrangementID" name="Placementlist" asp-for="LocationID" asp-items='@(new SelectList(string.Empty, "LocationArrangementID", "Code"))'>
            
        </select>
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script>
            $(function () {
                $("#LocationID").change(function () {

                    //var url = '@Url.Content("~/")' + "Arrangement/GetLocationArrangementsByLocation";
                    var url = '@Url.Action("GetLocationArrangementsByLocation","Arrangement")';
                    $.getJSON(url, { id: $('#LocationID').val() }, function (data) {
                        var items = '';
                        $("#LocationArrangementID").empty();
                        var rows = data.length;
                        for(let i= 0; i < rows; i++) {
                            var value = data[i].value;
                            var text = data[i].text;
                            items += "<option value='" + value + "'>" + text + "</option>"
                        }
                        $("#LocationArrangementID").html(items);
                    });
                });
            });
        </script>
    </div>
    <div class="form-group">
        <input type="hidden" asp-for="Code" />
        <input type="hidden" asp-for="ArrangementID" />
    </div>
    <div class="text-center panel-body">
        <br />
        <button type="submit" class="btn btn-sm btn-primary">Create</button>
        <button class="btn btn-sm btn-primary" onclick="javascript:history.go(-1);return false;">Cancel</button>

    </div>

</form>